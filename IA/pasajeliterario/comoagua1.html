<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HL Oral - Como agua para chocolate (Completo)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .timer-huge { font-size: 4rem; font-weight: bold; font-family: monospace; }
    .question-card { cursor: pointer; transition: all 0.2s; text-align: left; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; background: white; font-size: 0.875rem; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
    .question-card:hover { transform: translateY(-2px); border-color: #6d28d9; background: #f5f3ff; }
    .scroll-custom::-webkit-scrollbar { width: 6px; }
    .scroll-custom::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
  </style>
</head>
<body class="bg-slate-50 min-h-screen pb-20">

  <header class="bg-purple-900 text-white p-6 shadow-xl mb-6">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
      <div>
        <h1 class="text-2xl font-bold text-purple-200 tracking-tight">HL: Evaluaci√≥n Interna (Oral)</h1>
        <p class="text-lg opacity-90 font-medium">Como agua para chocolate ‚Äî <span class="italic">Enero: Tortas de Navidad</span></p>
      </div>
      <div class="flex items-center gap-6">
        <div class="text-right">
            <div id="statusLabel" class="bg-purple-800 border border-purple-400 px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest">Estado: En espera</div>
            <p class="text-[10px] mt-1 opacity-70 uppercase font-bold">Prep: 20:00 | Meta: 4:00</p>
        </div>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 grid grid-cols-1 lg:grid-cols-12 gap-8">
    
    <div class="lg:col-span-7 space-y-6">
      <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
        <div class="flex justify-between items-start mb-4">
            <div class="flex gap-4">
                <img src="https://raw.githubusercontent.com/scottscalici/imagenes/main/IA/fotos/como.jpg" class="h-24 rounded-lg shadow-md border border-slate-100">
                <div>
                    <h2 class="font-bold text-xl text-slate-800 tracking-tight">Pasaje Seleccionado</h2>
                    <p class="text-xs text-slate-500 mb-2">Analiza el contexto y recursos literarios.</p>
                    <a href="https://github.com/scottscalici/imagenes/blob/main/IA/pasajeliterario/pdf/pasaje%20literario%20-%20Como%20agua%20para%20chocolate%20-%20pr%C3%A1ctica%2001.pdf?raw=1" target="_blank" class="inline-flex items-center text-indigo-600 text-xs font-bold hover:text-indigo-800">
                        <span class="mr-1">üì•</span> DESCARGAR PDF COMPLETO
                    </a>
                </div>
            </div>
        </div>
        
        <div class="bg-slate-50 p-6 rounded-xl border border-slate-200 text-slate-800 leading-relaxed text-base scroll-custom overflow-y-auto max-h-[500px] font-serif">
            <p class="mb-4 italic text-slate-500 text-sm">
                Lee este fragmento con calma. Puedes subrayar ideas clave y pensar en la relaci√≥n con la obra completa.
            </p>
            <p class="mb-4">
                La cebolla tiene que estar finamente picada. Les sugiero ponerse un peque√±o trozo de cebolla en la mollera con el fin de evitar el molesto lagrimeo que se produce cuando uno la est√° cortando. Lo malo de llorar cuando uno pica cebolla no es el simple hecho de llorar, sino que a veces uno empieza, como quien dice, se pica, y ya no puede parar. No s√© si a ustedes les ha pasado pero a m√≠ la mera verdad s√≠. Infinidad de veces. Mam√° dec√≠a que era porque yo soy igual de sensible a la cebolla que Tita, mi t√≠a abuela.
            </p>
            <p class="mb-4">
                Dicen que Tita era tan sensible que desde que estaba en el vientre de mi bisabuela lloraba y lloraba cuando √©sta picaba cebolla; su llanto era tan fuerte que Nacha, la cocinera de la casa, que era medio sorda, lo escuchaba sin esforzarse. Un d√≠a los sollozos fueron tan fuertes que provocaron que el parto se adelantara. Y sin que mi bisabuela pudiera decir ni p√≠o, Tita arrib√≥ a este mundo prematuramente, sobre la mesa de la cocina, entre los olores de una sopa de fideos que estaba cocinando, los del tomillo, el laurel, el cilantro, el de la leche hervida, el de los ajos y, por supuesto, el de la cebolla. Como se imaginar√°n, la consabida nalgada no fue necesaria, pues Tita naci√≥ llorando de antemano, tal vez porque ella sab√≠a que su or√°culo determinaba que en esta vida le estaba negado el matrimonio. Contaba Nacha que Tita fue literalmente empujada a este mundo por un torrente impresionante de l√°grimas que se desbordaron sobre la mesa y el piso de la cocina.
            </p>
            <p>
                En la tarde, ya cuando el susto hab√≠a pasado y el agua, gracias al efecto de los rayos del sol, se hab√≠a evaporado, Nacha barri√≥ el residuo de las l√°grimas que hab√≠a quedado sobre la loseta roja que cubr√≠a el piso: Con esta sal rellen√≥ un costal de cinco kilos que utilizaron para cocinar bastante tiempo. Este inusitado nacimiento determin√≥ el hecho de que Tita sintiera un inmenso amor por la cocina‚Ä¶
            </p>
        </div>
      </div>
    </div>

    <div class="lg:col-span-5 space-y-6">
      
      <div class="bg-white p-6 rounded-2xl shadow-md border-t-4 border-purple-600 text-center">
        <div id="clock" class="timer-huge text-slate-900 tracking-tighter">00:00</div>
        <div id="success_msg" class="hidden text-emerald-600 font-bold text-sm animate-pulse mb-2">‚ú® L√çMITE M√çNIMO ALCANZADO (3:00+) ‚ú®</div>
        <button id="mainBtn" onclick="startPrep()" class="w-full bg-purple-700 hover:bg-purple-800 text-white font-bold py-4 rounded-xl text-lg shadow-lg transition-all active:scale-95">
          EMPEZAR PREPARACI√ìN (20:00)
        </button>
      </div>

      <div id="dynamicContainer" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 min-h-[400px]">
        
        <div id="notesBlock">
            <h3 class="font-bold text-slate-700 mb-4 flex items-center justify-between">
                <span>üìù Notas del Estudiante</span>
                <span class="text-[10px] text-slate-400 font-normal uppercase">M√°ximo 10 puntos</span>
            </h3>
            <div id="notesList" class="space-y-3">
                <p class="text-slate-400 text-sm italic">Haz clic en empezar preparaci√≥n para activar el formulario de notas...</p>
            </div>
        </div>

        <div id="qZone" class="hidden space-y-4">
            <div class="bg-indigo-950 text-white p-5 rounded-xl border-l-4 border-indigo-400">
                <h4 class="text-[10px] uppercase tracking-widest opacity-60 mb-1 font-bold">Intervenci√≥n del Examinador:</h4>
                <p id="qDisplay" class="text-lg font-medium leading-tight">Selecciona una pregunta de la lista para simular la discusi√≥n...</p>
            </div>
            <div class="grid grid-cols-1 gap-2 overflow-y-auto max-h-[400px] pr-2 scroll-custom">
                <button onclick="ask(this)" class="question-card">1. ¬øQu√© detalle del nacimiento de Tita te llam√≥ m√°s la atenci√≥n? ¬øPor qu√©?</button>
                <button onclick="ask(this)" class="question-card">2. ¬øC√≥mo interpretas ahora este nacimiento tan inusual tras leer la novela?</button>
                <button onclick="ask(this)" class="question-card">3. ¬øEs m√°s sorprendente que llorara en el vientre o que naciera en la cocina?</button>
                <button onclick="ask(this)" class="question-card">4. ¬øQu√© impresi√≥n te da Nacha en este pasaje? ¬øC√≥mo conecta con su futuro?</button>
                <button onclick="ask(this)" class="question-card">5. ¬øC√≥mo encaja su sensibilidad extrema con su personalidad adulta?</button>
                <button onclick="ask(this)" class="question-card">6. Escena llena de olores y sabores: ¬øQu√© efecto te produce esta descripci√≥n?</button>
                <button onclick="ask(this)" class="question-card">7. ¬øC√≥mo imaginas el ambiente en la cocina durante el nacimiento?</button>
                <button onclick="ask(this)" class="question-card">8. ¬øQu√© sentimiento domina: humor, ternura, tristeza o exageraci√≥n?</button>
                <button onclick="ask(this)" class="question-card">9. Usar sal de l√°grimas para cocinar: ¬øC√≥mico, m√°gico o simb√≥lico?</button>
                <button onclick="ask(this)" class="question-card">10. La narradora dice ser sensible a la cebolla: ¬øQu√© aporta este detalle?</button>
                <button onclick="ask(this)" class="question-card">11. ¬øQu√© relaci√≥n tiene Tita con la cocina en este momento inicial?</button>
                <button onclick="ask(this)" class="question-card">12. ¬øTe parece este pasaje una pista sobre el destino de Tita? ¬øPor qu√©?</button>
                <button onclick="ask(this)" class="question-card">13. ¬øVes continuidad o contraste con la Tita adulta que aparece luego?</button>
                <button onclick="ask(this)" class="question-card">14. ¬øLa familia interpreta correctamente su sensibilidad o la malinterpreta?</button>
                <button onclick="ask(this)" class="question-card">15. ¬øQu√© otra escena de la novela te recuerda a esta combinaci√≥n m√°gica?</button>
            </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    let seconds = 0, loop, isSpeaking = false;
    const PREP_TIME = 1200; // 20 min oficiales HL
    const SPEAK_TIME = 240;  // 4 min meta inicial discurso

    function updateClock() {
      const clockEl = document.getElementById('clock');
      const msg = document.getElementById('success_msg');
      const absSec = Math.abs(seconds);
      const m = Math.floor(absSec / 60);
      const s = absSec % 60;
      clockEl.innerText = (seconds < 0 ? "-" : "") + m + ":" + (s < 10 ? "0" : "") + s;
      
      if (isSpeaking) {
        // En el examen oficial el tiempo de discurso es 4-5 min. 
        // Marcamos √©xito si llega al √∫ltimo minuto (3:00 a 4:00)
        if (seconds <= 60 && seconds >= 0) {
            clockEl.style.color = "#10b981"; 
            msg.classList.remove('hidden');
        } else if (seconds < 0) {
            clockEl.style.color = "#ef4444";
            msg.classList.add('hidden');
        } else {
            clockEl.style.color = "#0f172a";
        }
      }
    }

    function startPrep() {
      clearInterval(loop);
      seconds = PREP_TIME;
      isSpeaking = false;
      document.getElementById('statusLabel').innerText = "Fase: Preparaci√≥n";
      document.getElementById('statusLabel').className = "bg-amber-600 border border-amber-300 px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest text-white";
      
      const list = document.getElementById('notesList');
      list.innerHTML = "";
      for(let i=1; i<=10; i++) {
        list.innerHTML += `<div class="flex gap-3 items-center"><span class="text-purple-500 font-bold text-xs w-4">${i}.</span><input type="text" placeholder="..." class="w-full border-b border-slate-100 focus:border-purple-400 focus:bg-slate-50 outline-none py-1 text-sm transition-all"></div>`;
      }

      const btn = document.getElementById('mainBtn');
      btn.innerText = "TERMINAR PREPARACI√ìN (PAUSA)";
      btn.className = "w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-4 rounded-xl text-lg shadow-lg transition-all";
      btn.onclick = waitToSpeak;

      loop = setInterval(() => {
        seconds--;
        updateClock();
        if (seconds <= 0) { clearInterval(loop); waitToSpeak(); }
      }, 1000);
    }

    function waitToSpeak() {
      clearInterval(loop);
      document.getElementById('clock').style.color = "#2563eb";
      const btn = document.getElementById('mainBtn');
      btn.innerText = "LISTO - INICIAR DISCURSO (4 MIN)";
      btn.className = "w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl text-lg shadow-lg transition-all";
      btn.onclick = startSpeak;
    }

    function startSpeak() {
      isSpeaking = true;
      seconds = SPEAK_TIME;
      document.getElementById('statusLabel').innerText = "Fase: Exposici√≥n Oral";
      document.getElementById('statusLabel').className = "bg-red-600 border border-red-300 px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest text-white";
      
      const btn = document.getElementById('mainBtn');
      btn.innerText = "FINALIZAR Y PASAR A PREGUNTAS";
      btn.className = "w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded-xl text-lg shadow-lg transition-all";
      btn.onclick = finishExam;

      loop = setInterval(() => {
        seconds--;
        updateClock();
      }, 1000);
    }

    function finishExam() {
      clearInterval(loop);
      document.getElementById('notesBlock').classList.add('hidden');
      document.getElementById('qZone').classList.remove('hidden');
      document.getElementById('mainBtn').classList.add('hidden');
      document.getElementById('statusLabel').innerText = "Fase: Discusi√≥n";
      document.getElementById('statusLabel').className = "bg-indigo-600 border border-indigo-300 px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest text-white";
    }

    function ask(btn) {
      document.getElementById('qDisplay').innerText = btn.innerText;
      document.getElementById('qDisplay').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  </script>
</body>
</html>
