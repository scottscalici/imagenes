<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M√≥dulo de pr√°ctica ‚Äì Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">
  <div class="max-w-3xl w-full bg-white shadow-xl rounded-2xl p-6 space-y-6">

    <!-- Header + Progress -->
    <header class="space-y-2">
      <h1 class="text-2xl font-bold text-slate-800">M√≥dulo de pr√°ctica ‚Äì Demo</h1>
      <p class="text-sm text-slate-500">
        Completa el M√≥dulo 1 para desbloquear el M√≥dulo 2.
      </p>

      <!-- Progress bar -->
      <div class="w-full bg-slate-200 rounded-full h-3 overflow-hidden mt-3">
        <div id="progress-fill" class="h-3 bg-emerald-500 transition-all duration-300" style="width: 0%;"></div>
      </div>
      <p id="progress-label" class="text-xs text-slate-600 mt-1">
        Progreso: 0 % (0 de 2 m√≥dulos completos)
      </p>
    </header>

    <!-- MODULE 1: Quiz -->
    <section id="module-1" class="border-l-4 border-sky-500 bg-sky-50 rounded-xl p-4 space-y-4">
      <div class="flex items-center justify-between gap-4">
        <h2 class="font-semibold text-lg text-slate-800">
          M√≥dulo 1 ¬∑ Pr√°ctica de verbos (presente)
        </h2>
        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-sky-100 text-sky-700">
          Obligatorio
        </span>
      </div>

      <p class="text-sm text-slate-700">
        Escribe la forma correcta del verbo entre par√©ntesis. 
        Necesitas al menos <span class="font-semibold">50&nbsp;%</span> de aciertos para desbloquear el siguiente m√≥dulo.
      </p>

      <div class="space-y-3" id="module-1-questions">
        <!-- Question 1 -->
        <div class="space-y-1 quiz-item" data-answer="hablo">
          <label class="text-sm font-medium text-slate-800">
            1. Yo ______ mucho en clase. (hablar)
          </label>
          <input type="text" class="w-full border rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-sky-400" />
          <p class="text-xs text-slate-500 feedback hidden"></p>
        </div>

        <!-- Question 2 -->
        <div class="space-y-1 quiz-item" data-answer="comen">
          <label class="text-sm font-medium text-slate-800">
            2. Ellos ______ en la cafeter√≠a. (comer)
          </label>
          <input type="text" class="w-full border rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-sky-400" />
          <p class="text-xs text-slate-500 feedback hidden"></p>
        </div>

        <!-- Question 3 -->
        <div class="space-y-1 quiz-item" data-answer="vivimos">
          <label class="text-sm font-medium text-slate-800">
            3. Nosotros ______ en Michigan. (vivir)
          </label>
          <input type="text" class="w-full border rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-sky-400" />
          <p class="text-xs text-slate-500 feedback hidden"></p>
        </div>

        <!-- Question 4 -->
        <div class="space-y-1 quiz-item" data-answer="est√°s">
          <label class="text-sm font-medium text-slate-800">
            4. T√∫ ______ cansado hoy. (estar)
          </label>
          <input type="text" class="w-full border rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-sky-400" />
          <p class="text-xs text-slate-500 feedback hidden"></p>
        </div>
      </div>

      <div class="flex flex-wrap items-center gap-3 pt-2">
        <button id="btn-check-module-1"
                class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 text-white text-sm font-semibold">
          Corregir respuestas
        </button>
        <p id="module-1-result" class="text-sm text-slate-700"></p>
      </div>
    </section>

    <!-- MODULE 2: Locked until Module 1 completed -->
    <section id="module-2-wrapper"
             class="relative border-l-4 border-emerald-500 rounded-xl p-4 bg-emerald-50/60">
      <!-- Lock overlay (initially visible) -->
      <div id="module-2-lock"
           class="absolute inset-0 bg-white/70 backdrop-blur-sm flex flex-col items-center justify-center text-center text-slate-600 text-sm">
        <div class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-slate-200 mb-2">
          üîí
        </div>
        <p>M√≥dulo bloqueado. Completa el M√≥dulo 1 con al menos 50&nbsp;% para continuar.</p>
      </div>

      <!-- Actual Module 2 content -->
      <div id="module-2" class="space-y-3 opacity-40">
        <div class="flex items-center justify-between gap-4">
          <h2 class="font-semibold text-lg text-slate-800">
            M√≥dulo 2 ¬∑ Repaso / Vocabulario (demo)
          </h2>
          <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700">
            Siguiente paso
          </span>
        </div>
        <p class="text-sm text-slate-700">
          Aqu√≠ ir√≠a tu secci√≥n de <strong>repaso de verbos</strong>, <strong>vocabulario</strong> 
          o incluso la <strong>Curiosidad</strong>. Este espacio solo se desbloquea despu√©s
          de que el estudiante haya intentado y pasado el m√≥dulo anterior.
        </p>
        <ul class="list-disc list-inside text-sm text-slate-700 space-y-1">
          <li>Podr√≠as poner aqu√≠ un enlace a otra p√°gina.</li>
          <li>O un v√≠deo, actividades de lectura, etc.</li>
          <li>O un bot√≥n: ‚ÄúIr a la Curiosidad del d√≠a‚Äù.</li>
        </ul>
      </div>
    </section>

  </div>

  <script>
    // Simple config
    const PASS_THRESHOLD = 0.5;   // 50%
    const TOTAL_MODULES = 2;

    const progressFill = document.getElementById('progress-fill');
    const progressLabel = document.getElementById('progress-label');

    function updateProgress(completedModules) {
      const percent = Math.round((completedModules / TOTAL_MODULES) * 100);
      progressFill.style.width = percent + '%';
      progressLabel.textContent = `Progreso: ${percent} % (${completedModules} de ${TOTAL_MODULES} m√≥dulos completos)`;
    }

    function unlockModule2() {
      const lockOverlay = document.getElementById('module-2-lock');
      const module2 = document.getElementById('module-2');
      if (lockOverlay) lockOverlay.classList.add('hidden');
      if (module2) module2.classList.remove('opacity-40');
      updateProgress(2);
    }

    document.getElementById('btn-check-module-1').addEventListener('click', () => {
      const items = document.querySelectorAll('#module-1 .quiz-item');
      let correct = 0;

      items.forEach(item => {
        const answer = (item.dataset.answer || '').trim().toLowerCase();
        const input = item.querySelector('input');
        const feedback = item.querySelector('.feedback');
        const userValue = (input.value || '').trim().toLowerCase();

        if (!input) return;

        if (userValue === answer) {
          correct++;
          input.classList.remove('border-red-400');
          input.classList.add('border-emerald-400');
          feedback.textContent = '‚úÖ Correcto';
          feedback.classList.remove('hidden');
          feedback.classList.remove('text-red-500');
          feedback.classList.add('text-emerald-600');
        } else {
          input.classList.remove('border-emerald-400');
          input.classList.add('border-red-400');
          feedback.textContent = `‚ùå Correcto: ${answer}`;
          feedback.classList.remove('hidden');
          feedback.classList.remove('text-emerald-600');
          feedback.classList.add('text-red-500');
        }
      });

      const total = items.length;
      const score = total > 0 ? correct / total : 0;
      const resultEl = document.getElementById('module-1-result');
      resultEl.textContent = `Obtuviste ${correct} de ${total} (${Math.round(score * 100)} %).`;

      // Update progress if passed
      if (score >= PASS_THRESHOLD) {
        resultEl.classList.remove('text-red-600');
        resultEl.classList.add('text-emerald-700');
        // Mark module 1 as complete
        updateProgress(1);
        unlockModule2();
      } else {
        resultEl.classList.remove('text-emerald-700');
        resultEl.classList.add('text-red-600');
        updateProgress(0); // if you want ‚Äúpartial credit‚Äù visually, we could change this
      }
    });

    // Initial progress
    updateProgress(0);
  </script>
</body>
</html>
