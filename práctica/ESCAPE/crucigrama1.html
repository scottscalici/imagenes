<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Crucigrama – El cuerpo y la salud</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .cw-grid {
      border-collapse: collapse;
      margin: 0 auto;
    }
    .cw-cell {
      width: 32px;
      height: 32px;
      border: 1px solid #111827; /* gray-900 */
      position: relative;
      background: #0f172a;       /* slate-900 for empty */
    }
    .cw-cell-inner {
      width: 100%;
      height: 100%;
      background: #e5f9ff;       /* light teal for default letter cell */
    }
    .cw-cell input {
      width: 100%;
      height: 100%;
      border: none;
      text-align: center;
      font-size: 18px;
      text-transform: uppercase;
      background: transparent;
      outline: none;
    }
    .cw-number {
      position: absolute;
      top: 1px;
      left: 2px;
      font-size: 9px;
      color: #4b5563;           /* gray-600 */
    }
    .cw-correct {
      background: #bbf7d0;      /* emerald-200 */
    }
    .cw-secret-correct {
      background: #bfdbfe;      /* blue-200 */
    }
    .cw-incorrect {
      background: #fecaca;      /* red-200 */
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen">
  <main class="max-w-5xl mx-auto p-4 sm:p-8 space-y-6">
    <header class="space-y-2">
      <h1 class="text-2xl font-bold text-slate-900">
        Crucigrama – El cuerpo y la salud
      </h1>
      <p class="text-sm text-slate-600">
        Completa el crucigrama. Haz clic en <strong>Comprobar respuestas</strong> para ver qué letras son correctas.
        Las letras secretas correctas se marcarán en <span class="font-semibold text-sky-700">azul</span>.<br>
        No uses acentos.<br>
Sigue los números para responder a las pistas.<br>
A veces parece que las palabras se cruzan, pero en realidad son dos pistas colocadas una al lado de la otra.<br>
      </p>
    </header>

    <div class="grid md:grid-cols-[minmax(0,2fr)_minmax(0,2fr)] gap-8">
      <!-- Crossword grid -->
      <section class="bg-white rounded-2xl shadow p-4 flex justify-center overflow-x-auto">
        <table id="cw-grid" class="cw-grid"></table>
      </section>

      <!-- Clues -->
      <section class="bg-white rounded-2xl shadow p-4 space-y-4 text-sm">
        <div>
          <h2 class="font-semibold text-slate-800 mb-1">Horizontales</h2>
         <ul class="list-none list-inside space-y-1">
            <li><strong>2.</strong> El órgano en el pecho que bombea la sangre.</li>
            <li><strong>5.</strong> Parte de la cara que usas para hablar y comer.</li>
            <li><strong>9.</strong> Parte del cuerpo que pones dentro del zapato.</li>
            <li><strong>10.</strong> Órgano donde va la comida; te duele si comes algo malo.</li>
            <li><strong>11.</strong> Extremidad superior del cuerpo conectada al hombro.</li>
          </ul>
        </div>

        <div>
          <h2 class="font-semibold text-slate-800 mb-1">Verticales</h2>
         <ul class="list-none list-inside space-y-1">
            <li><strong>1.</strong> Parte interior del cuello; te duele cuando tienes tos o gripe.</li>
            <li><strong>3.</strong> Órgano de la visión; lo usas para ver.</li>
            <li><strong>4.</strong> Parte superior del cuerpo que tiene el cerebro, los ojos y la boca.</li>
            <li><strong>6.</strong> Parte blanca y dura del esqueleto.</li>
            <li><strong>7.</strong> Parte de la cara que usas para oler y respirar.</li>
            <li><strong>8.</strong> Articulación en el medio de la pierna que se dobla.</li>
          </ul>
        </div>
      </section>
    </div>

    <!-- Controls + feedback -->
    <section class="bg-white rounded-2xl shadow p-4 space-y-3 text-sm">
      <div class="flex flex-wrap items-center gap-3">
        <button id="btn-check"
          class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 text-white font-semibold">
          Comprobar respuestas
        </button>
        <button id="btn-clear"
          class="px-4 py-2 rounded-lg bg-slate-100 hover:bg-slate-200 text-slate-800 font-semibold">
          Borrar todo
        </button>
      </div>
      <p id="cw-status" class="text-sm text-slate-700"></p>

      <div class="mt-3 border-t border-slate-200 pt-3 space-y-1">
        <p class="font-semibold text-slate-800">
          Letras secretas (desordenadas):
        </p>
        <p id="secret-letters" class="font-mono tracking-[0.3em] text-lg text-sky-800">
          —
        </p>
        <p class="text-xs text-slate-500">
          Descifra las letras para formar la palabra secreta (la <strong>contraseña</strong>).
        </p>
      </div>
    </section>
  </main>

  <script>
    // ---------- Crossword definition ----------
    const crossword = {
      rows: 13,
      cols: 13,
      words: [
        // number, dir, row, col, answer
        { number: 2, dir: 'across', row: 3, col: 3, answer: 'CORAZON' },
        { number: 5, dir: 'across', row: 5, col: 1, answer: 'BOCA' },
        { number: 9, dir: 'across', row: 9, col: 1, answer: 'PIE' },
        { number: 10, dir: 'across', row: 7, col: 3, answer: 'ESTOMAGO' },
        { number: 11, dir: 'across', row: 11, col: 1, answer: 'BRAZO' },

        { number: 1, dir: 'down', row: 1, col: 5, answer: 'GARGANTA' },
        { number: 3, dir: 'down', row: 3, col: 8, answer: 'OJO' },
        { number: 4, dir: 'down', row: 3, col: 1, answer: 'CABEZA' },
        { number: 6, dir: 'down', row: 3, col: 10, answer: 'HUESO' },
        { number: 7, dir: 'down', row: 6, col: 2, answer: 'NARIZ' },
        { number: 8, dir: 'down', row: 6, col: 6, answer: 'RODILLA' },
      ],
      // Secret SALUD letters (0-based row/col)
      secretCells: [
        { row: 7, col: 4 },  // S in ESTOMAGO
        { row: 2, col: 5 },  // A in GARGANTA
        { row: 10, col: 6 }, // L in RODILLA
        { row: 4, col: 10 }, // U in HUESO
        { row: 8, col: 6 },  // D in RODILLA
      ],
    };

    // ---------- Build board model ----------
    const board = [];
    for (let r = 0; r < crossword.rows; r++) {
      const row = [];
      for (let c = 0; c < crossword.cols; c++) {
        row.push(null); // null = black / no cell
      }
      board.push(row);
    }

    // Fill letters and numbers
    crossword.words.forEach(word => {
      const { number, dir, row, col, answer } = word;
      for (let i = 0; i < answer.length; i++) {
        const r = row + (dir === 'down' ? i : 0);
        const c = col + (dir === 'across' ? i : 0);
        if (!board[r][c]) {
          board[r][c] = {
            row: r,
            col: c,
            solution: answer[i],
            number: null,
            secret: false,
          };
        } else {
          // Already has same letter from crossing word
          // nothing extra to do here
        }
      }
      // Mark starting cell with number
      const startCell = board[row][col];
      if (startCell) {
        startCell.number = number;
      }
    });

    // Mark secret SALUD cells
    crossword.secretCells.forEach(({ row, col }) => {
      if (board[row][col]) {
        board[row][col].secret = true;
      }
    });

    // ---------- Render grid ----------
    const gridEl = document.getElementById('cw-grid');

    board.forEach((row, r) => {
      const tr = document.createElement('tr');
      row.forEach((cell, c) => {
        const td = document.createElement('td');
        td.className = 'cw-cell';

        if (cell) {
          const inner = document.createElement('div');
          inner.className = 'cw-cell-inner';
          inner.dataset.row = r;
          inner.dataset.col = c;

          const input = document.createElement('input');
          input.maxLength = 1;
          input.autocomplete = 'off';
          input.setAttribute('data-row', r);
          input.setAttribute('data-col', c);
          input.addEventListener('input', e => {
            e.target.value = e.target.value.toUpperCase();
          });

          inner.appendChild(input);

          if (cell.number !== null) {
            const numSpan = document.createElement('span');
            numSpan.className = 'cw-number';
            numSpan.textContent = cell.number;
            inner.appendChild(numSpan);
          }

          td.appendChild(inner);
        }

        tr.appendChild(td);
      });
      gridEl.appendChild(tr);
    });

    const statusEl = document.getElementById('cw-status');
    const secretEl = document.getElementById('secret-letters');

    function checkCrossword() {
      let totalCells = 0;
      let correctCells = 0;
      const foundSecrets = [];

      // Reset styles
      document.querySelectorAll('.cw-cell-inner').forEach(div => {
        div.classList.remove('cw-correct', 'cw-incorrect', 'cw-secret-correct');
      });

      for (let r = 0; r < crossword.rows; r++) {
        for (let c = 0; c < crossword.cols; c++) {
          const cell = board[r][c];
          if (!cell) continue;
          totalCells++;

          const selector = `input[data-row="${r}"][data-col="${c}"]`;
          const input = document.querySelector(selector);
          const val = (input.value || '').toUpperCase().trim();
          const correct = val === cell.solution.toUpperCase();

          const wrapper = input.parentElement;

          if (correct) {
            correctCells++;
            if (cell.secret) {
              wrapper.classList.add('cw-secret-correct');
              foundSecrets.push(cell.solution.toUpperCase());
            } else {
              wrapper.classList.add('cw-correct');
            }
          } else if (val === '') {
            // leave as default color
          } else {
            wrapper.classList.add('cw-incorrect');
          }
        }
      }

      // Status
      if (correctCells === totalCells) {
        statusEl.textContent = '✅ ¡Todo correcto! Has completado el crucigrama.';
        statusEl.classList.remove('text-red-600');
        statusEl.classList.add('text-emerald-700');
      } else {
        statusEl.textContent = `Llevas ${correctCells} de ${totalCells} letras correctas.`;
        statusEl.classList.remove('text-emerald-700');
        statusEl.classList.add('text-slate-700');
      }

      // Secret letters (scrambled)
      if (foundSecrets.length) {
        secretEl.textContent = foundSecrets.join(' ');
      } else {
        secretEl.textContent = '—';
      }
    }

    function clearCrossword() {
      document.querySelectorAll('#cw-grid input').forEach(input => {
        input.value = '';
      });
      document.querySelectorAll('.cw-cell-inner').forEach(div => {
        div.classList.remove('cw-correct', 'cw-incorrect', 'cw-secret-correct');
      });
      statusEl.textContent = '';
      secretEl.textContent = '—';
    }

    document.getElementById('btn-check').addEventListener('click', checkCrossword);
    document.getElementById('btn-clear').addEventListener('click', clearCrossword);
  </script>
</body>
</html>
