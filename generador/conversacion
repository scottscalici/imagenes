<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador: Conversación</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-sans bg-gray-100 min-h-screen p-6">
  <div class="max-w-4xl mx-auto space-y-6">

    <!-- Input Area -->
    <section class="mb-6 space-y-4 bg-white shadow rounded-xl p-6">
      <h1 class="text-2xl font-bold text-gray-800 mb-2">Generador: Conversación</h1>

      <div>
        <label class="block font-semibold mb-1">Título (opcional):</label>
        <input type="text" id="convTitle" class="w-full p-2 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="Conversación">
      </div>

      <div>
        <label class="block font-semibold mb-1">Imagen URL (opcional):</label>
        <input type="text" id="convImg" class="w-full p-2 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="https://...">
      </div>

      <div>
        <label class="block font-semibold mb-1">Instrucciones / Texto:</label>
        <textarea id="convText" class="w-full h-32 p-4 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="Escribe aquí tus instrucciones o preguntas..."></textarea>
      </div>

      <button type="button" onclick="generateConversacion()" class="mt-4 bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-6 rounded-xl shadow-md">
        Generar sección
      </button>
    </section>

    <!-- Preview -->
    <section id="convSection" class="hidden mb-6">
      <h2 class="text-xl font-semibold mb-2">Vista previa</h2>
      <div id="convPreview"></div>
    </section>

    <!-- Code Output -->
    <section id="codeOutput" class="hidden">
      <h2 class="text-xl font-semibold mb-2">Código HTML:</h2>
      <textarea id="htmlCode" class="w-full h-64 p-4 border rounded-xl font-mono text-sm bg-gray-50"></textarea>
    </section>

  </div>

  <script>
    window.generateConversacion = function() {
      const title = document.getElementById("convTitle").value.trim() || "Conversación";
      const imgUrl = document.getElementById("convImg").value.trim();
      const text = document.getElementById("convText").value.trim();

      const htmlSnippet = [
        '<section class="bg-white shadow rounded-xl border-l-4 border-yellow-500 overflow-hidden">',
        `  <h2 class="text-yellow-600 font-semibold text-lg px-4 pt-4">${title}</h2>`,
        '  <div class="p-4 text-gray-800 space-y-4">',
        imgUrl ? `    <img src="${imgUrl}" alt="${title}" class="rounded-lg shadow-md max-h-64 object-cover">` : "",
        text ? `    <p class="whitespace-pre-line">${text}</p>` : "",
        '    <div class="flex items-center gap-3 mt-4">',
        '      <button onclick="startTimer(this)" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg">Iniciar</button>',
        '      <button onclick="resetTimer(this)" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-lg">Reiniciar</button>',
        '      <span class="font-mono" data-timer>00:00</span>',
        '    </div>',
        '  </div>',
        '</section>'
      ].join("\n");

      // Show preview
      document.getElementById("convPreview").innerHTML = htmlSnippet;
      document.getElementById("convSection").classList.remove("hidden");

      // Show output
      document.getElementById("htmlCode").value = htmlSnippet;
      document.getElementById("codeOutput").classList.remove("hidden");
    };

    // Timer logic
    window.startTimer = function(btn) {
      const container = btn.closest("div");
      const display = container.querySelector("[data-timer]");
      let seconds = 0;
      clearInterval(container.timer);
      container.timer = setInterval(() => {
        seconds++;
        const m = String(Math.floor(seconds / 60)).padStart(2, "0");
        const s = String(seconds % 60).padStart(2, "0");
        display.textContent = `${m}:${s}`;
      }, 1000);
    };

    window.resetTimer = function(btn) {
      const container = btn.closest("div");
      const display = container.querySelector("[data-timer]");
      clearInterval(container.timer);
      display.textContent = "00:00";
    };
  </script>
</body>
</html>
