<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tailwind Snippet Restyler v5.3</title>

  <!-- Tailwind config (MUST load before Tailwind itself) -->
  <script>
    tailwind = {
      config: {
        safelist: [
          {
            pattern: /(border|text|bg)-(emerald|sky|rose|amber|indigo|teal|violet|slate|gray|stone|cyan|blue|purple|lime|pink|yellow|fuchsia|neutral|gold)-(50|100|200|300|400|500|600|700|800|900)/,
          },
        ],
      },
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { font-family: system-ui, sans-serif; }
    #palette::-webkit-scrollbar { height: 6px; }
    #palette::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
    .disabled { opacity: 0.5; pointer-events: none; }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 min-h-screen p-6">
  <div class="max-w-5xl mx-auto space-y-6">

    <!-- Controls -->
    <div class="flex flex-wrap items-center gap-4">
      <!-- Quick Palette -->
      <div id="palette" class="flex overflow-x-auto gap-2"></div>

      <!-- Primary Controls -->
      <select id="colorSelect" class="border rounded p-2">
        <option>emerald</option><option>sky</option><option>rose</option><option>amber</option>
        <option>indigo</option><option>teal</option><option>violet</option><option>slate</option>
        <option>gray</option><option>stone</option><option>cyan</option><option>blue</option>
        <option>purple</option><option>lime</option><option>pink</option><option>yellow</option>
        <option>fuchsia</option><option>neutral</option><option>gold</option>
      </select>

      <label class="text-sm">Shade:
        <input id="shadeInput" type="number" value="600" min="50" max="900" step="50" class="w-20 border rounded p-1 text-center">
      </label>

      <label class="text-sm flex items-center gap-1">
        <input id="matchTitle" type="checkbox" checked> Match Title Color
      </label>

      <label class="text-sm flex items-center gap-1">
        <input id="addTint" type="checkbox"> Add Background Tint
      </label>
    </div>

    <!-- Secondary color controls -->
    <div class="flex flex-wrap items-center gap-4 pl-8">
      <label class="text-sm flex items-center gap-1">
        <input id="useSecondary" type="checkbox"> Use Secondary Color for Background
      </label>

      <select id="secondaryColor" class="border rounded p-2 disabled">
        <option>emerald</option><option>sky</option><option>rose</option><option>amber</option>
        <option>indigo</option><option>teal</option><option>violet</option><option>slate</option>
        <option>gray</option><option>stone</option><option>cyan</option><option>blue</option>
        <option>purple</option><option>lime</option><option>pink</option><option>yellow</option>
        <option>fuchsia</option><option>neutral</option><option>gold</option>
      </select>

      <label class="text-sm">Shade:
        <input id="secondaryShade" type="number" value="300" min="50" max="900" step="50" class="w-20 border rounded p-1 text-center disabled">
      </label>

      <button id="copyBtn" class="ml-auto bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700">Copy Styled HTML</button>
    </div>

    <!-- Input -->
    <div>
      <label class="text-sm font-semibold">Paste Your Section or Div Snippet:
<p>ğŸ“ Classroom + Practice Icons
<br>
ğŸ¯ Meta â€“ goal setting or speaking time targets
<br>
ğŸ’¬ ConversaciÃ³n â€“ speaking prompts, dialogue tasks
<br>
âœï¸ PrÃ¡ctica â€“ grammar or vocabulary practice
<br>
ğŸ“š Lectura â€“ reading assignments
<br>
ğŸµ MÃºsica â€“ song-based activities
<br>
ğŸ§ Audio / ğŸ”Š â€“ listening tasks
<br>
ğŸŒ€ Se â€“ used for â€œseâ€ structures (e.g., se impersonal)
<br>
ğŸ§  GramÃ¡tica â€“ for deep-dive grammar explanations
<br>
ğŸ² Juego â€“ games or randomness, often for review
<br>
ğŸ“… Time + Schedule
<br>
â±ï¸ Timer â€“ countdowns for speaking or writing tasks
<br>
ğŸ—“ï¸ Calendar â€“ date references or planning
<br>
ğŸ•’ DuraciÃ³n â€“ duration of an activity
<br>
ğŸ—‚ï¸ Organization + Tasks
<br>
âœ… Done â€“ marking a completed task
<br>
ğŸ› ï¸ Pending â€“ something still being worked on
<br>
ğŸ“Œ Reminder â€“ flagged to return to
<br>
ğŸ”— Link â€“ clickable or copy-paste resource
<br>
ğŸŒ IB Theme / Cultural Context
<br>
ğŸŒ / ğŸŒ Compartimos el planeta
<br>
ğŸ§¬ Identidades
<br>
ğŸ§  Ingenio humano
<br>
ğŸ  OrganizaciÃ³n social
<br>
ğŸ§³ Experiencias
<br>
ğŸ­ Cultura or artistic tasks
<br>
ğŸ’¡ Tone / Mood
<br>
ğŸ”‹ Energy / Motivation
<br>
ğŸ˜³ Awkward / Embarrassment
<br>
ğŸ¤¯ Frustration / Chaos
<br>
ğŸ¤ª Wild / Funny
<br>
ğŸ’¡ Tip / Idea
<br>
âš ï¸ Warning / Donâ€™t forget
<br>
ğŸ˜´ Fatigue / Lazy moments</label>
      <textarea id="inputHtml" rows="8" class="w-full border rounded p-3 font-mono text-sm" placeholder="Paste your HTML section or div snippet here..."></textarea>
    </div>

    <!-- Preview -->
    <div>
      <h2 class="text-sm font-semibold text-gray-600 mb-2">Preview:</h2>
      <div id="previewArea" class="bg-white border rounded-xl p-4 min-h-[150px] text-gray-500 italic">
        Paste a snippet above and choose a color...
      </div>
    </div>

    <!-- Output -->
    <div>
      <h2 class="text-sm font-semibold text-gray-600 mb-2">Styled HTML Output:</h2>
      <textarea id="outputHtml" rows="8" readonly class="w-full border rounded p-3 font-mono text-xs bg-gray-50"></textarea>
    </div>
  </div>

  <script>
    const paletteColors = [
      {name:'emerald',hex:'#059669'},{name:'sky',hex:'#0ea5e9'},{name:'rose',hex:'#e11d48'},{name:'amber',hex:'#f59e0b'},
      {name:'indigo',hex:'#4338ca'},{name:'teal',hex:'#0d9488'},{name:'violet',hex:'#7c3aed'},{name:'slate',hex:'#475569'},
      {name:'gray',hex:'#6b7280'},{name:'stone',hex:'#78716c'},{name:'cyan',hex:'#06b6d4'},{name:'blue',hex:'#2563eb'},
      {name:'purple',hex:'#9333ea'},{name:'lime',hex:'#84cc16'},{name:'pink',hex:'#db2777'},{name:'yellow',hex:'#eab308'},
      {name:'fuchsia',hex:'#c026d3'},{name:'neutral',hex:'#737373'},{name:'gold',hex:'#d4af37'}
    ];

    const palette=document.getElementById('palette');
    paletteColors.forEach(c=>{
      const swatch=document.createElement('button');
      swatch.className='w-6 h-6 rounded-full border border-gray-300 flex-shrink-0';
      swatch.style.background=c.hex;
      swatch.title=c.name;
      swatch.addEventListener('click',()=>{
        document.getElementById('colorSelect').value=c.name;
        applyColor();
      });
      palette.appendChild(swatch);
    });

    const secColor = document.getElementById('secondaryColor');
    const secShade = document.getElementById('secondaryShade');
    document.getElementById('useSecondary').addEventListener('change',(e)=>{
      if(e.target.checked){
        secColor.classList.remove('disabled');
        secShade.classList.remove('disabled');
      } else {
        secColor.classList.add('disabled');
        secShade.classList.add('disabled');
      }
      applyColor();
    });

    function applyColor(){
      const input=document.getElementById('inputHtml').value;
      if(!input.trim()){document.getElementById('previewArea').innerHTML='Paste a section or div first.';return;}
      let updated=input;

      // clean previous color classes
      updated=updated
        .replace(/border-[a-z]+-[0-9]+/g,'')
        .replace(/text-[a-z]+-[0-9]+/g,'')
        .replace(/bg-[a-z]+-[0-9]+/g,'');

      const color=document.getElementById('colorSelect').value;
      const shade=parseInt(document.getElementById('shadeInput').value);
      const match=document.getElementById('matchTitle').checked;
      const tintOn=document.getElementById('addTint').checked;
      const tint=(shade>=600)?100:50;

      // secondary
      const useSecondary=document.getElementById('useSecondary').checked;
      const color2=document.getElementById('secondaryColor').value;
      const shade2=parseInt(document.getElementById('secondaryShade').value);
      const tint2=(shade2>=600)?100:50;

      // container recolor
      updated=updated.replace(/<(section|div)([^>]*)class=\"([^\"]*)\"/,(m,tag,before,classes)=>{
        return `<${tag}${before}class="${classes.trim()} border-l-4 border-${color}-${shade}"`;
      });

      // text recolor
      if(match){
        const next=shade+100;
        updated=updated.replace(/<(h2|p)([^>]*)class=\"([^\"]*)\"/,(m,tag,before,classes)=>{
          return `<${tag}${before}class="${classes.trim()} text-${color}-${next}"`;
        });
      }

      // background recolor
      if(tintOn){
        if(useSecondary){
          updated=updated.replace(/<(section|div)([^>]*)class=\"([^\"]*)\"/,(m,tag,before,classes)=>{
            return `<${tag}${before}class="${classes.trim()} bg-${color2}-${tint2}"`;
          });
        } else {
          updated=updated.replace(/<(section|div)([^>]*)class=\"([^\"]*)\"/,(m,tag,before,classes)=>{
            return `<${tag}${before}class="${classes.trim()} bg-${color}-${tint}"`;
          });
        }
      }

      // recolor inline spans if secondary active
      if(useSecondary){
        updated=updated.replace(/<span([^>]*)class=\"([^\"]*)\"/g,(m,before,classes)=>{
          return `<span${before}class="${classes.trim()} bg-${color2}-${shade2} text-${color2}-${shade2+200}"`;
        });
      }

      document.getElementById('previewArea').innerHTML=updated;
      document.getElementById('outputHtml').value=updated;
    }

    document.querySelectorAll('#colorSelect,#shadeInput,#matchTitle,#addTint,#secondaryColor,#secondaryShade').forEach(el=>{
      el.addEventListener('input',applyColor);
    });

    document.getElementById('copyBtn').addEventListener('click',()=>{
      navigator.clipboard.writeText(document.getElementById('outputHtml').value);
      alert('âœ… Styled HTML copied to clipboard');
    });
  </script>
</body>
</html>
