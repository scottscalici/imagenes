<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Práctica con HAY – Unidad 2.2</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center">

<div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-xl text-center">
  <h1 class="text-2xl font-bold mb-4">
    Práctica con <span class="text-blue-600">HAY</span>
  </h1>

  <div class="mb-4">
    <button onclick="setMode('hay')" class="px-3 py-1 bg-blue-100 rounded mr-2">
      Hay + objeto
    </button>
    <button onclick="setMode('cuantos')" class="px-3 py-1 bg-green-100 rounded">
      ¿Cuántos?
    </button>
  </div>

  <p id="prompt" class="text-lg mb-4"></p>

  <input
    id="answer"
    class="w-full border p-2 rounded mb-3"
    placeholder="Escribe tu respuesta…"
  />

  <button
    onclick="checkAnswer()"
    class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
  >
    Comprobar
  </button>

  <p id="feedback" class="mt-4 font-semibold"></p>

  <button onclick="nextWord()" class="mt-4 text-sm text-gray-600 underline">
    Siguiente
  </button>
</div>

<script>
// ---------------- VOCAB (Unidad 2.2) ----------------
const vocab = [
  "el armario",
  "la mesita de noche",
  "la cama",
  "la cómoda",
  "el lavabo",
  "la ducha",
  "la bañera",
  "el inodoro",
  "el televisor",
  "la estantería",
  "la mesa",
  "la silla",
  "el sofá",
  "el refrigerador",
  "la estufa",
  "el microondas",
  "el lavaplatos"
];

// ---------------- LOCATIONS ----------------
const locations = [
  "en mi mochila",
  "en mi dormitorio",
  "en mi sala",
  "en mi cocina",
  "en mi baño"
];

// ---------------- STATE ----------------
let mode = "hay";
let current = 0;
let currentCount = 1;
let currentLocation = "";

// ---------------- HELPERS ----------------
function normalize(text) {
  return text.toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "")
    .trim();
}

function splitNoun(word) {
  const parts = word.split(" ");
  return { article: parts[0], noun: parts.slice(1).join(" ") };
}

function pluralize(noun) {
  if (noun.endsWith("a") || noun.endsWith("o") || noun.endsWith("e")) {
    return noun + "s";
  }
  return noun + "es";
}

function numberWord(n) {
  return n === 1 ? "un" : n === 3 ? "tres" : "cinco";
}

// ---------------- LOAD PROMPT ----------------
function loadPrompt() {
  const item = vocab[current];
  const { noun } = splitNoun(item);

  if (mode === "hay") {
    document.getElementById("prompt").textContent =
      `There is a ${noun}.`;
  } else {
    currentCount = [1, 3, 5][Math.floor(Math.random() * 3)];
    currentLocation = locations[Math.floor(Math.random() * locations.length)];

    document.getElementById("prompt").textContent =
      `¿Cuántos ${pluralize(noun)} hay ${currentLocation}? (${currentCount})`;
  }

  document.getElementById("answer").value = "";
  document.getElementById("feedback").textContent = "";
}

// ---------------- CHECK ANSWER ----------------
function checkAnswer() {
  const item = vocab[current];
  const { article, noun } = splitNoun(item);
  const user = normalize(document.getElementById("answer").value);

  let correct;

  if (mode === "hay") {
    const unUna = article === "la" ? "una" : "un";
    correct = normalize(`hay ${unUna} ${noun}`);
  } else {
    const num = numberWord(currentCount);
    const nounForm = currentCount === 1 ? noun : pluralize(noun);
    correct = normalize(`hay ${num} ${nounForm} ${currentLocation}`);
  }

  if (user === correct) {
    showFeedback("✅ ¡Correcto!", "green");
  } else {
    showFeedback(`❌ Ejemplo: ${correct}`, "red");
  }
}

// ---------------- FEEDBACK ----------------
function showFeedback(text, color) {
  const el = document.getElementById("feedback");
  el.textContent = text;
  el.className = `mt-4 font-semibold text-${color}-600`;
}

// ---------------- NAV ----------------
function nextWord() {
  current = (current + 1) % vocab.length;
  loadPrompt();
}

function setMode(m) {
  mode = m;
  loadPrompt();
}

loadPrompt();
</script>

</body>
</html>
