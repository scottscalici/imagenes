<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Imagen aleatoria</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-100 text-slate-800 min-h-screen">
  <main class="max-w-xl mx-auto px-4 py-10">
    <section class="bg-white rounded-2xl shadow border border-slate-200 p-6 space-y-4">
      <h1 class="text-2xl font-bold text-indigo-700">ðŸŽ² Imagen aleatoria</h1>
      <p class="text-slate-600 text-sm">
        Haz clic para abrir una imagen al azar.
      </p>

      <button id="btn"
        class="w-full bg-indigo-600 text-white font-semibold py-3 rounded-xl hover:opacity-90">
        Generar imagen
      </button>

      <p id="status" class="text-xs text-slate-500"></p>
    </section>
  </main>

  <script>
    const JSON_URL = "banco_imagenes.json"; // same folder
    const btn = document.getElementById("btn");
    const status = document.getElementById("status");

    async function pickRandom() {
      status.textContent = "Cargando bancoâ€¦";

      const res = await fetch(JSON_URL, { cache: "no-store" });
      if (!res.ok) throw new Error("No se pudo cargar el JSON.");

      const items = await res.json();
      if (!items || items.length === 0) throw new Error("El JSON estÃ¡ vacÃ­o.");

      const choice = items[Math.floor(Math.random() * items.length)];
      if (!choice?.id) throw new Error("Falta el campo 'id' en una entrada.");

      // Redirect to imagen.html with chosen id
      window.location.href = `imagen.html?id=${encodeURIComponent(choice.id)}`;
    }

    btn.addEventListener("click", () => pickRandom().catch(err => {
      status.textContent = "Error: " + err.message;
    }));

    // OPTIONAL: auto-roll when page loads
    // pickRandom().catch(err => status.textContent = "Error: " + err.message);
  </script>
</body>
</html>
